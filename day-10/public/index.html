<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <title>React App</title>
  </head>
  <body>
    <p>Through this point, we&#39;ve built our few handful of components without adding much user interaction. Today, we&#39;re going to change that.</p>
<h2 id="user-interaction">User interaction</h2>
<p>The browser is an event-driven application. Everything that a user does in the browser fires an event, from clicking buttons to even just moving the mouse. In plain JavaScript, we can listen for these events and attach a JavaScript function to interact with them. </p>
<p>For instance, we can attach a function to the <code>mousemove</code> browser event with the JS: </p>
<pre><code class="lang-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> go <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ele <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ele<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'Move your mouse to see the demo'</span><span class="token punctuation">;</span>
  ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> screenX<span class="token punctuation">,</span> screenY <span class="token punctuation">}</span> <span class="token operator">=</span> evt<span class="token punctuation">;</span>
    ele<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;div>Mouse is at: X: '</span> <span class="token operator">+</span>
          screenX <span class="token operator">+</span> <span class="token string">', Y: '</span> <span class="token operator">+</span> screenY <span class="token operator">+</span>
                    <span class="token string">'&lt;/div>'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This results in the following functionality:</p>
<div class="demo" id="mousemove">
  Move your mouse over this text
</div>

<p>In React, however we don&#39;t have to interact with the browser&#39;s event loop in raw JavaScript as React provides a way for us to handle events using <code>props</code>. </p>
<p>For instance, to listen for the <code>mousemove</code> event from the (rather unimpressive) demo above in React, we&#39;ll set the prop <code>onMouseMove</code> (notice the camelcasing of the event name). </p>
<pre><code class="lang-javascript"><span class="token operator">&lt;</span>div onMouseMove<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
  Move the mouse
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<p>React provides a lot of <code>props</code> we can set to listen for different browser events, such as click, touch, drag, scroll, selection events, and many more (see the <a href="https://facebook.github.io/react/docs/events.html">events</a> documentation for a list of all of them).</p>
<div id="demo1"></div>

<p>To see some of these in action, the following is a small demo of some of the <code>props</code> we can pass on our elements. Each text element in the list set the prop it lists. Try playing around with the list and seeing how the events are called and handled within the element.</p>
<div id="demo2"></div>

<p>We&#39;ll be using the <code>onClick</code> prop quite a bit all throughout our apps quite a bit, so it&#39;s a good idea to be familiar with it. In our activity list header, we have a search icon that we haven&#39;t hooked up yet to show a search box. </p>
<p>The interaction we <em>want</em> is to show a search <code>&lt;input /&gt;</code> when our users click on the search icon. Recall that our <code>Header</code> component is implemented like this:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// toggle visibility when run on the state</span>
  <span class="token function">showSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Classes to add to the &lt;input /> element</span>
    <span class="token keyword">let</span> searchInputClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"searchInput"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// Update the class array if the state is visible</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      searchInputClasses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"header"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"menuIcon"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"dashTop"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"dashBottom"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"circle"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>

        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">"text"</span>
          className<span class="token operator">=</span><span class="token punctuation">{</span>searchInputClasses<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          placeholder<span class="token operator">=</span><span class="token string">"Search ..."</span> <span class="token operator">/</span><span class="token operator">></span>

        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Adding an onClick handler to call the showSearch button */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showSearch<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          className<span class="token operator">=</span><span class="token string">"fa fa-search searchIcon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When the user clicks on the <code>&lt;div className=&quot;fa fa-search searchIcon&quot;&gt;&lt;/div&gt;</code> element, we&#39;ll want to run a function to update the state of the component so the <code>searchInputClasses</code> object gets updated. Using the <code>onClick</code> handler, this is pretty simple.</p>
<p>Let&#39;s make this component stateful (it needs to track if the search field should be showing or not). We can convert our component to be stateful using the <code>constructor()</code> function:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<h3 id="what-is-a-constructor-function-">What is a <code>constructor</code> function?</h3>
<p>In JavaScript, the <code>constructor</code> function is a function that runs when an object is created. It returns a reference to the Object function that created the instance&#39;s <code>prototype</code>. </p>
<p>In plain English, a constructor function is the function that runs when the JavaScript runtime creates a new object. We&#39;ll use the constructor method to set up instance variables on the object as it runs right when the object is created.</p>
<p>When using the <code>ES6</code> class syntax to create an object, we have to call the <code>super()</code> method before any other method. Calling the <code>super()</code> function calls the parent class&#39;s <code>constructor()</code> function. We&#39;ll call it with the <em>same arguments</em> as the <code>constructor()</code> function of our class is called with.  </p>
</blockquote>
<p>When the user clicks on the button, we&#39;ll want to update the state to say that the <code>searchVisible</code> flag gets updated. Since we&#39;ll want the user to be able to close/hide the <code>&lt;input /&gt;</code> field after clicking on the search icon for a second time, we&#39;ll <em>toggle</em> the state rather than just set it to true. </p>
<p>Let&#39;s create this method to bind our click event:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">showSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Finally, we can attach a click handler (using the <code>onClick</code> prop) on the icon element to call our new <code>showSearch()</code> method. The entire updated source for our <code>Header</code> component looks like this:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// toggle visibility when run on the state</span>
  <span class="token function">showSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Classes to add to the &lt;input /> element</span>
    <span class="token keyword">let</span> searchInputClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"searchInput"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// Update the class array if the state is visible</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      searchInputClasses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"header"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"fa fa-more"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>

        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">"text"</span>
          className<span class="token operator">=</span><span class="token punctuation">{</span>searchInputClasses<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          placeholder<span class="token operator">=</span><span class="token string">"Search ..."</span> <span class="token operator">/</span><span class="token operator">></span>

        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Adding an onClick handler to call the showSearch button */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showSearch<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          className<span class="token operator">=</span><span class="token string">"fa fa-search searchIcon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Try clicking on the search icon and watch the input field appear and disappear (the animation effect is handled by CSS animations).</p>
<div id="demo3"></div>

<h2 id="input-events">Input events</h2>
<p>Whenever we build a form in React, we&#39;ll use the input events offered by React. Most notably, we&#39;ll use the <code>onSubmit()</code> and <code>onChange()</code> props most often.</p>
<p>Let&#39;s update our search box demo to capture the text inside the search field when it updates. Whenever an <code>&lt;input /&gt;</code> field has the <code>onChange()</code> prop set, it will call the function <em>every time the field changes</em>. When we click on it and start typing, the function will be called. </p>
<p>Using this prop, we can capture the value of the field in our state. </p>
<p>Rather than updating our <code>&lt;Header /&gt;</code> component, let&#39;s create a new child component to contain a <code>&lt;form /&gt;</code> element. By moving the form-handling responsibilities to it&#39;s own form, we can simplify the <code>&lt;Header /&gt;</code> code and we can call up to the parent of the header when our user submits the form (this is a usual React pattern).</p>
<p>Let&#39;s create a new component we&#39;ll call <code>SearchForm</code>. This new component is a stateful component as we&#39;ll need to hold on to the value of the search input (track it as it changes):</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      searchText<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now, we already have the HTML for the form written in the <code>&lt;Header /&gt;</code> component, so let&#39;s grab that from our <code>Header</code> component and return it from our <code>SearchForm.render()</code> function:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> searchVisible <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">let</span> searchClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'searchInput'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>searchVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      searchClasses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>form className<span class="token operator">=</span><span class="token string">'header'</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">"search"</span>
          className<span class="token operator">=</span><span class="token punctuation">{</span>searchClasses<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateSearchInput<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          placeholder<span class="token operator">=</span><span class="token string">"Search ..."</span> <span class="token operator">/</span><span class="token operator">></span>

        <span class="token operator">&lt;</span>div
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showSearch<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          className<span class="token operator">=</span><span class="token string">"fa fa-search searchIcon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Notice that we lost the styles on our <code>&lt;input /&gt;</code> field. Since we no longer have the <code>searchVisible</code> state in our new component, we can&#39;t use it to style the <code>&lt;input /&gt;</code> any longer. <em>However</em>, we can pass a prop from our <code>Header</code> component that tells the <code>SearchForm</code> to render the input as visible. </p>
<p>Let&#39;s define the <code>searchVisible</code> prop (using <code>React.PropTypes</code>, of course) and update the <code>render</code> function to use the new prop value to show (or hide) the search <code>&lt;input /&gt;</code>. We&#39;ll also set a default value for the visibility of the field to be false (since our <code>Header</code> shows/hides it nicely):</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    onSubmit<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    searchVisible<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>bool
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<div id="searchStylesDemo"></div>

<p>Now we have our styles back on the <code>&lt;input /&gt;</code> element, let&#39;s add the functionality for when the user types in the search box, we&#39;ll want to capture the value of the search field. We can achieve this workflow by attaching the <code>onChange</code> prop to the <code>&lt;input /&gt;</code> element and passing it a function to call every time the <code>&lt;input /&gt;</code> element is changed.</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">updateSearchInput</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchText<span class="token punctuation">:</span> val
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> searchVisible <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">let</span> searchClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'searchInput'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>searchVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      searchClasses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>form className<span class="token operator">=</span><span class="token string">'header'</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">"search"</span>
          className<span class="token operator">=</span><span class="token punctuation">{</span>searchClasses<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateSearchInput<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          placeholder<span class="token operator">=</span><span class="token string">"Search ..."</span> <span class="token operator">/</span><span class="token operator">></span>

        <span class="token operator">&lt;</span>div
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showSearch<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          className<span class="token operator">=</span><span class="token string">"fa fa-search searchIcon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When we type in the field, the <code>updateSearchInput()</code> function will be called. We&#39;ll keep track of the value of the form by updating the state. In the <code>updateSearchInput()</code> function, we can call directly to <code>this.setState()</code> to update the state of the component. </p>
<blockquote>
<p>The value is held on the <code>event</code> object&#39;s target as <code>event.target.value</code>.</p>
</blockquote>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">updateSearchInput</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchText<span class="token punctuation">:</span> val
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<h4 id="controlled-vs-uncontrolled">Controlled vs. uncontrolled</h4>
<p>We&#39;re creating what&#39;s known as an <strong>uncontrolled</strong> component as we&#39;re not setting the value of the <code>&lt;input /&gt;</code> element. We can&#39;t provide any validation or post-processing on the input text value as it stands right now.</p>
<p>If we want to validate the field or manipulate the value of the <code>&lt;input /&gt;</code> component, we&#39;ll have to create what is called a <strong>controlled</strong> component, which really just means that we pass it a value using the <code>value</code> prop. A controlled component version&#39;s <code>render()</code> function would look like:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>input
        type<span class="token operator">=</span><span class="token string">"search"</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchText<span class="token punctuation">}</span>
        className<span class="token operator">=</span><span class="token punctuation">{</span>searchInputClasses<span class="token punctuation">}</span>
        onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateSearchInput<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        placeholder<span class="token operator">=</span><span class="token string">"Search ..."</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<p>As of now, we have no way to actually submit the form, so our user&#39;s can&#39;t really search. Let&#39;s change this. We&#39;ll want to wrap the <code>&lt;input /&gt;</code> component in a <code>&lt;form /&gt;</code> DOM element so our users can press the enter key to submit the form. We can capture the form submission by using the <code>onSubmit</code> prop on the <code>&lt;form /&gt;</code> element.</p>
<p>Let&#39;s update the <code>render()</code> function to reflect this change.</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">submitForm</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>searchText<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onSubmit</span><span class="token punctuation">(</span>searchText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> searchVisible <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">let</span> searchClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'searchInput'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>searchVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      searchClasses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'active'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>submitForm<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">"search"</span>
          className<span class="token operator">=</span><span class="token punctuation">{</span>searchClasses<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateSearchInput<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          placeholder<span class="token operator">=</span><span class="token string">"Search ..."</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>We immediately call <code>event.preventDefault()</code> on the <code>submitForm()</code> function. This stops the browser from bubbling the event up which would causes the default behavior of the entire page to reload (the default function when a browser submits a form). </p>
</blockquote>
<p>Now when we type into the <code>&lt;input /&gt;</code> field and press enter, the <code>submitForm()</code> function gets called with the event object.</p>
<p>So... great, we can submit the form and stuff, but when do we actually do the searching? For demonstration purposes right now, we&#39;ll pass the search text up the parent-child component chain so the <code>Header</code> can decide <em>what</em> to search. </p>
<blockquote>
<p>The <code>SearchForm</code> component certainly doesn&#39;t know what it&#39;s searching, so we&#39;ll have to pass the responsibility up the chain. We&#39;ll use this callback strategy quite a bit. </p>
</blockquote>
<p>In order to pass the search functionality up the chain, our <code>SearchForm</code> will need to accept a prop function to call when the form is submitted. Let&#39;s define a prop we&#39;ll call <code>onSubmit</code> that we can pass to our <code>SearchForm</code> component. Being good developers, we&#39;ll also add a default <code>prop</code> value and a <code>propType</code> for this <code>onSubmit</code> function. Since we&#39;ll want to make sure the <code>onSubmit()</code> is defined, we&#39;ll set the <code>onSubmit</code> prop to be a required prop:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    onSubmit<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    searchVisible<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>bool
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    onSubmit<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    searchVisible<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>When the form is submitted, we can call this function directly from the <code>props</code>. Since we&#39;re keeping track of the search text in our state, we can call the function with the <code>searchText</code> value in the state so the <code>onSubmit()</code> function only gets the value and doesn&#39;t need to deal with an event.</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">submitForm</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// prevent the form from reloading the entire page</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// call the callback with the search value</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now, when the user presses enter we can call this <code>onSubmit()</code> function passed in the <code>props</code> by our <code>Header</code> component. </p>
<div id="searchForm"></div>

<p>We can use this <code>SearchForm</code> component in our <code>Header</code> component and pass it the two props we&#39;ve defined (<code>searchVisible</code> and <code>onSubmit</code>):</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> SearchForm <span class="token keyword">from</span> <span class="token string">'./SearchFormWithSubmit'</span>

<span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// toggle visibility when run on the state</span>
  <span class="token function">showSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchVisible<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Classes to add to the &lt;input /> element</span>
    <span class="token keyword">let</span> searchInputClasses <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"searchInput"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// Update the class array if the state is visible</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      searchInputClasses<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"active"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"header"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"menuIcon"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"dashTop"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"dashBottom"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"circle"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>

        <span class="token operator">&lt;</span>SearchForm
          searchVisible<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>searchVisible<span class="token punctuation">}</span>
          onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onSubmit<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>

        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Adding an onClick handler to call the showSearch button */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showSearch<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          className<span class="token operator">=</span><span class="token string">"fa fa-search searchIcon"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Header
</code></pre>
<div id="headerSearch"></div>

<p>Now we have a search form component we can use and reuse across our app. Of course, we&#39;re not actually searching anything yet. Let&#39;s fix that and implement search.</p>
<h2 id="implementing-search">Implementing search</h2>
<p>To implement search in our component, we&#39;ll want to pass up the search responsibility one more level from our <code>Header</code> component to a container component we&#39;ll call <code>Panel</code>. </p>
<p>First things first, let&#39;s implement the same pattern of passing a callback to a parent component from within a child component from the <code>Panel</code> container to the <code>Header</code> component.</p>
<p>On the <code>Header</code> component, let&#39;s update the <code>propTypes</code> for a prop we&#39;ll define as a prop called <code>onSearch</code>:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
Header<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  onSearch<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func
<span class="token punctuation">}</span>
</code></pre>
<p>Inside the <code>Header</code> component&#39;s &#39;submitForm()&#39; function, call this <code>onSearch()</code> prop we will pass into it:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">submitForm</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onSearch</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
Header<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  onSearch<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>Notice that our virtual tree looks like this:</p>
<pre><code class="lang-javascript"><span class="token operator">&lt;</span>Panel<span class="token operator">></span>
  <span class="token operator">&lt;</span>Header<span class="token operator">></span>
    <span class="token operator">&lt;</span>SearchForm<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>SearchForm<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Panel<span class="token operator">></span>
</code></pre>
<p>When the <code>&lt;SearchForm /&gt;</code> is updated, it will pass along it&#39;s awareness of the search input&#39;s change to it&#39;s parent, the <code>&lt;Header /&gt;</code>, when it will pass along upwards to the <code>&lt;Panel /&gt;</code> component. This method is <em>very common</em> in React apps and provides a good set of functional isolation for our components.</p>
</blockquote>
<p>Back in our <code>Panel</code> component we built on day 7, we&#39;ll pass a function to the <code>Header</code> as the <code>onSearch()</code> prop on the <code>Header</code>. What we&#39;re saying here is that when the search form has been submitted, we want the search form to call back to the header component which will then call to the <code>Panel</code> component to handle the search. </p>
<p>Since the <code>Header</code> component doesn&#39;t control the content listing, the <code>Panel</code> component does, we <em>have</em> to pass the responsibility one more level up, as we&#39;re defining here.</p>
<p>In any case, our <code>Panel</code> component is essentially a copy of our <code>Content</code> component we previously worked on:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// &lt;~ set loading to false</span>
      activities<span class="token punctuation">:</span> data<span class="token punctuation">,</span>
      filtered<span class="token punctuation">:</span> data<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Check to see if the requestRefresh prop has changed</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>requestRefresh <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>requestRefresh<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>loading<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>updateData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  handleSearch <span class="token operator">=</span> txt <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>txt <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        filtered<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>activities
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> activities <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
      <span class="token keyword">const</span> filtered <span class="token operator">=</span> activities<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>a <span class="token operator">=</span><span class="token operator">></span> a<span class="token punctuation">.</span>actor <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">.</span>actor<span class="token punctuation">.</span>login<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        filtered
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// Call out to github and refresh directory</span>
  <span class="token function">updateData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      activities<span class="token punctuation">:</span> data
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onComponentRefresh<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>loading<span class="token punctuation">,</span> filtered<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>Header
          onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSearch<span class="token punctuation">}</span>
          title<span class="token operator">=</span><span class="token string">"Github activity"</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"line"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
          <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Show loading message if loading */</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span>loading <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Loading<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* Timeline item */</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span>filtered<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>activity<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>ActivityItem
              key<span class="token operator">=</span><span class="token punctuation">{</span>activity<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
              activity<span class="token operator">=</span><span class="token punctuation">{</span>activity<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Let&#39;s update our state to include a <code>searchFilter</code> string, which will just be the searching value:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      searchFilter<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      activities<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In order to actually handle the searching, we&#39;ll need to pass a <code>onSearch()</code> function to our <code>Header</code> component. Let&#39;s define an <code>onSearch()</code> function in our <code>Panel</code> component and pass it off to the <code>Header</code> props in the <code>render()</code> function:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token comment" spellcheck="true">// after the content has refreshed, we want to </span>
  <span class="token comment" spellcheck="true">// reset the loading variable</span>
  <span class="token function">onComponentRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

  <span class="token function">handleSearch</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// handle search here</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>loading<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>Header
          onSearch<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSearch<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span> 
          title<span class="token operator">=</span><span class="token string">"Github activity"</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Content 
          requestRefresh<span class="token operator">=</span><span class="token punctuation">{</span>loading<span class="token punctuation">}</span>
          onComponentRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onComponentRefresh<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
          fetchData<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>updateData<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>All we did here was add a <code>handleSearch()</code> function and pass it to the header. Now when the user types in the search box, the <code>handleSearch()</code> function on our <code>Panel</code> component will be called. </p>
<p>To actually <em>implement</em> search, we&#39;ll need to keep track of this string and update our <code>updateData()</code> function to take into account search filtering. First, let&#39;s set the <code>searchFilter</code> on the state. We can also force the <code>Content</code> to reload the data by setting <code>loading</code> to true, so we can do this in one step:</p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">Panel</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
  <span class="token function">handleSearch</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      searchFilter<span class="token punctuation">:</span> val<span class="token punctuation">,</span>
      loading<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Lastly, let&#39;s update our <code>updateData()</code> function to take <em>search</em> into account. </p>
<pre><code class="lang-javascript"><span class="token keyword">class</span> <span class="token class-name">SearchableContent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>loading<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>updateData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Although this might look complex, it&#39;s actually nearly identical to our existing <code>updateData()</code> function with the exception of the fact that we updated our <code>fetch()</code> result to call the <code>filter()</code> method on the json collection. </p>
<p>All the <code>collection.filter()</code> function does is run the function passed in for every element and it filters <em>out</em> the values that return falsy values, keeping the ones that return truthy ones. Our search function simply looks for a match on the Github activity&#39;s <code>actor.login</code> (the Github user) to see if it regexp-matches the <code>searchFilter</code> value.</p>
<p>With the <code>updateData()</code> function updated, our search is complete. </p>
<p>Try searching for <code>auser</code>.</p>
<p>Now we have a 3-layer app component that handles search from a nested child component. We jumped from beginner to intermediate with this post. Pat yourself on the back. This was some hefty material. Make sure you understand this because we&#39;ll use these concepts we covered today quite often.</p>
<p>In the next section, we&#39;ll jump out and look at building <em>pure</em> components.</p>
<div id="searchDemo"></div>


  </body>
</html>
